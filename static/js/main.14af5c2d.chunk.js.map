{"version":3,"sources":["components/userView.js","App.js","index.js"],"names":["baseUrl","UserView","props","addMarker","e","console","log","markers","state","push","latlng","setState","mainTitle","mainDescription","records","title","description","contactPoint","type","url","filter","event","this","target","value","fetch","then","res","json","metadata","catch","error","newRecords","features","properties","getAvatar","created","getRecords","getTitle","Math","random","record","lat","extent","spatial","bbox","lng","genDelta","refs","map","leafletElement","flyTo","rnd","className","key","id","onClick","handleClick","src","alt","name","class","Map","ref","center","zoom","TileLayer","attribution","placeholder","aria-label","aria-describedby","onChange","handleInputChange","handleSubmit","renderProjectItem","React","Component","App","projects","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.14af5c2d.chunk.js","sourcesContent":["import React from \"react\";\n//import FeatureSection from \"./featureSection\";\nimport \"./userView.css\";\nimport \"./featureSection.css\";\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\n\nconst baseUrl='https://emotional.byteroad.net';\nconst collection=\"ec_catalog\";\nconst limit=100;\n\nclass UserView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mainTitle: \"\",\n      mainDescription: \"\",\n      records: [],\n      title: \"\",\n      description: \"\",\n      contactPoint: \"\",\n      type: \"\",\n      url: \"\",\n      filter:\"\",\n      markers: []\n    };\n  }\n\n\n  // Add a marker to the map, by clicking on it\n  addMarker = (e) => {\n    console.log(\"comes here\");\n    const {markers} = this.state\n    markers.push(e.latlng)\n    console.log(e.latlng);\n    this.setState({markers})\n  }  \n  \n  handleInputChange(event) {\n\n    this.setState({\n      filter: event.target.value\n    });\n  }\n\n\n  getTitle(url) {\n    fetch(url)\n      .then(res => res.json())\n      .then(metadata => {\n        // upon success, update tasks\n        this.setState({ mainTitle: metadata.title });\n        this.setState({ mainDescription: metadata.description });\n        console.log(this.state.mainTitle);\n      })\n      .catch(error => {\n        // upon failure, show error message\n      });\n\n    \n  }\n\n\n  getRecords(url) {\n    fetch(url)\n      .then(res => res.json())\n      .then(newRecords => {\n        // upon success, update tasks\n        this.setState({ records: newRecords.features });\n        this.setState({title: this.state.records[0].properties.title});\n        this.setState({description: this.state.records[0].properties.description});\n        this.setState({url: this.getAvatar()});\n        this.setState({created: this.state.records[0].properties['created']});\n        this.setState({contactPoint: this.state.records[0].properties.contactPoint});\n        this.setState({type: this.state.records[0].properties.type});\n        //console.log(this.state.records);\n      })\n      .catch(error => {\n        // upon failure, show error message\n      });\n\n    \n  }\n\n  handleSubmit() {\n    \n      // read records\n      this.getRecords(this.state.filter !== ''?\n        `${baseUrl}/collections/${collection}/items?q=${this.state.filter}`:\n        `${baseUrl}/collections/${collection}/items?limit=${limit}`);\n\n    \n  }\n\n\n  componentDidMount() {\n\n    // read title\n    this.getTitle(`${baseUrl}/collections/${collection}?f=json`);\n\n    this.getRecords(`${baseUrl}/collections/${collection}/items?limit=${limit}`);\n  }\n\n  genDelta() {\n\n    return Math.random();\n  }\n\n  /* step 3 */\n  handleClick(record) {\n\n/*\n    const latlng = {lat: record.geometry.coordinates[1], lng: record.geometry.coordinates[0]};\n*/\n    console.log(record);\n    const latlng = {lat: record.properties.extent.spatial.bbox[0][1], lng: record.properties.extent.spatial.bbox[0][0]+ this.genDelta()};\n    console.log(latlng);\n    //console.log(this.genDelta());\n\n    const {markers} = this.state\n    markers.push(latlng)\n    this.setState({markers})\n    let mapInst =  this.refs.map.leafletElement;\n    mapInst.flyTo(latlng, 12);\n\n    return this.setState({  \n      title: record.properties.title,\n      description: record.properties.description,\n      url: this.getAvatar(),\n      created: record.properties['created'],\n      contactPoint: record.properties['contactPoint'],\n      type: record.properties['type'],      \n    }); \n\n\n\n\n\n  }\n\n  getAvatar(){\n\n\n    const rnd=Math.random();\n    if (rnd < 0.2) {\n      return \"https://upload.wikimedia.org/wikipedia/en/a/a7/StanMarsh.png\";\n    } else if (rnd < 0.4) {\n      return \"https://upload.wikimedia.org/wikipedia/en/7/77/EricCartman.png\";\n    } else if (rnd < 0.6) {\n      return \"https://upload.wikimedia.org/wikipedia/en/2/25/KyleBroflovski.png\";\n    } else if (rnd < 0.8) {\n      return \"https://upload.wikimedia.org/wikipedia/en/6/6f/KennyMcCormick.png\";\n    } else {\n      return \"https://upload.wikimedia.org/wikipedia/en/a/ab/Wendy_South_Park.png\";\n    }\n  }\n\n  renderProjectItem() {\n\n    //console.log(this.props.records.features);\n    return this.state.records.map(record => {\n      return (\n        <div\n          className=\"project-item\"  key={record.id}\n          onClick={() => {\n            this.handleClick(record);\n          }}\n        >\n          <img src={this.getAvatar()} alt={record.properties.title} />\n          <h3>{record.properties.title}</h3>\n          <p>description: {record.properties.description}</p>\n          <p>contactPoint: {record.properties.contactPoint.name}</p>\n          <p>created: {record.properties['created']}</p>\n          <p>type: {record.properties['type']}</p>\n        </div>\n      );\n    });\n  }\n\n\n  render() {\n    return (\n\n      \n      <div> \n\n        <div className=\"card bg-dark text-white text-center\">\n          <div class=\"card-body\">\n            <h2 class=\"card-title\">{this.state.mainTitle !== \"\"? this.state.mainTitle : \"My Catalog\"}</h2>\n            <p class=\"card-text\">{this.state.mainDescription !== \"\"? this.state.mainDescription: \"This is a placeholder for the catalog description.\"}</p>\n          </div>\n        </div>\n\n        <div className=\"featured-section\">\n\n          <div id=\"feature-block\">\n            \n            <Map ref='map' center={[38.736946, -9.142685]} zoom={11} onClick={this.addMarker}>\n              <TileLayer\n                url=\"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png\"\n                attribution='&copy; Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n              />\n          </Map>     \n            \n            \n            <div id=\"right\">\n              <h2 id=\"feature-title\">{this.state.title}</h2>\n              <p id=\"feature-desc\">{this.state.description}</p>\n              <p id=\"feature-created\">{this.state.created}</p>\n            </div>\n\n          </div>\n\n\n          <div className=\"project-search\">\n          <div className=\"form-inline mb-3\">\n\n            <input type=\"text\" className=\"form-control flex-primary-1\" placeholder=\"\" aria-label=\"\" aria-describedby=\"basic-addon1\" name=\"title\" onChange={e => this.handleInputChange(e)}/>\n            <div className=\"input-group-prepend\">\n                <button className=\"btn btn-primary ml-2\" type=\"button\" onClick={(e) => this.handleSubmit(e)}>Filter</button>\n            </div>\n          </div>  \n        </div>\n\n          \n        </div>\n        \n\n\n\n\n\n\n        <div id=\"project-grid\">{this.renderProjectItem()}</div>\n      </div>\n    );\n  }\n}\n\nexport default UserView;\n","import React from \"react\";\nimport UserView from \"./components/userView\";\nimport \"./App.css\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { records: {}};\n  }\n\n\n\n  componentDidMount() {\n    fetch(\"https://emotional.byteroad.net/collections/ec_catalog/items?f=json\")\n      .then(res => res.json())\n      .then(newRecords => {\n        // upon success, update tasks\n        this.setState({ records: newRecords });\n        //console.log(newRecords);\n      })\n      .catch(error => {\n        // upon failure, show error message\n      });\n  }\n\n  render() {\n    return (\n      <div>\n         <UserView records={this.state.records.features} projects={this.state.projects}/>\n      </div>\n    );\n  }\n}\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}