{"version":3,"sources":["components/userView.js","App.js","index.js"],"names":["baseUrl","limeOptions","color","weight","UserView","props","addMarker","e","console","log","markers","state","push","latlng","setState","map","mainTitle","mainDescription","mainExtent","center","records","title","description","contactPoint","type","url","filter","event","this","target","value","coords","bounds","rect","L","getBounds","getCenter","fetch","then","res","json","metadata","drawExtent","extent","spatial","bbox","catch","error","newRecords","features","getRecords","getCollectionMetadata","Math","random","record","lat","properties","lng","genDelta","refs","leafletElement","flyTo","getAvatar","created","rnd","className","key","id","onClick","handleClick","src","alt","name","Map","ref","zoom","whenCreated","TileLayer","attribution","Rectangle","pathOptions","placeholder","aria-label","aria-describedby","onChange","handleInputChange","handleSubmit","renderProjectItem","href","React","Component","App","projects","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fa45ce45.chunk.js","sourcesContent":["import React from \"react\";\n//import FeatureSection from \"./featureSection\";\nimport \"./userView.css\";\nimport \"./featureSection.css\";\nimport { Map, TileLayer, Rectangle } from \"react-leaflet\";\nimport * as L from \"leaflet\";\n\nconst baseUrl='https://emotional.byteroad.net';\nconst collection=\"ec_catalog\";\nconst limit=100;\nconst fillBlueOptions = { fillColor: 'blue' }\nconst limeOptions = { color:  \"#ff7800\", weight: 1 }\nconst rectangle = [\n  [0,0,\n  ],\n  [\n  0,0]\n];\n\nclass UserView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      map: null,\n      mainTitle: \"\",\n      mainDescription: \"\",\n      mainExtent: [\n        [51.49, -0.08],\n        [51.5, -0.06],\n      ],\n      center: [0,0],\n      records: [],\n      title: \"\",\n      description: \"\",\n      contactPoint: \"\",\n      type: \"\",\n      url: \"\",\n      filter:\"\",\n      markers: []\n    };\n  }\n\n  // Add a marker to the map, by clicking on it\n  addMarker = (e) => {\n    console.log(\"comes here\");\n    const {markers} = this.state\n    markers.push(e.latlng)\n    console.log(e.latlng);\n    this.setState({markers})\n  }  \n  \n  handleInputChange(event) {\n\n    this.setState({\n      filter: event.target.value\n    });\n  }\n\n\n\n  drawExtent(coords){\n\n    var bounds = [[coords[1], coords[0]], [coords[3], coords[2] ]];\n    const rect= L.rectangle(bounds, {color: \"#ff7800\", weight: 1})\n\n    this.setState({ mainExtent: bounds});\n    this.setState({ center: rect.getBounds().getCenter() });\n\n\n    //console.log(this.state.center);\n  \n\n\n  }\n\n  getCollectionMetadata(url) {\n\n    fetch(url)\n      .then(res => res.json())\n      .then(metadata => {\n        // upon success, update tasks\n        this.setState({ mainTitle: metadata.title });\n        this.setState({ mainDescription: metadata.description });\n        //console.log(metadata.extent.spatial.bbox[0]);\n        this.drawExtent(metadata.extent.spatial.bbox[0]);\n      })\n      .catch(error => {\n        // upon failure, show error message\n      });\n\n    \n  }\n\n\n  getRecords(url) {\n    fetch(url)\n      .then(res => res.json())\n      .then(newRecords => {\n        // upon success, update tasks\n        this.setState({ records: newRecords.features });\n/*         this.setState({title: this.state.records[0].properties.title});\n        this.setState({description: this.state.records[0].propemainTitlerties.description});\n        this.setState({url: this.getAvatar()});\n        this.setState({created: this.state.records[0].properties['created']});\n        this.setState({contactPoint: this.state.records[0].properties.contactPoint});\n        this.setState({type: this.state.records[0].properties.type}); */\n        //console.log(this.state.records);\n      })\n      .catch(error => {\n        // upon failure, show error message\n      });\n\n    \n  }\n\n  handleSubmit() {\n    \n      // read records\n      this.getRecords(this.state.filter !== ''?\n        `${baseUrl}/collections/${collection}/items?q=${this.state.filter}`:\n        `${baseUrl}/collections/${collection}/items?limit=${limit}`);\n\n    \n  }\n\n\n  componentDidMount() {\n\n    // read title, etc\n    this.getCollectionMetadata(`${baseUrl}/collections/${collection}?f=json`);\n    this.getRecords(`${baseUrl}/collections/${collection}/items?limit=${limit}`);\n  }\n\n  genDelta() {\n\n    return Math.random();\n  }\n\n  /* step 3 */\n  handleClick(record) {\n\n/*\n    const latlng = {lat: record.geometry.coordinates[1], lng: record.geometry.coordinates[0]};\n*/\n    console.log(record);\n    const latlng = {lat: record.properties.extent.spatial.bbox[0][1], lng: record.properties.extent.spatial.bbox[0][0]+ this.genDelta()};\n    console.log(latlng);\n    //console.log(this.genDelta());\n\n    const {markers} = this.state\n    markers.push(latlng)\n    this.setState({markers})\n    let mapInst =  this.refs.map.leafletElement;\n    mapInst.flyTo(latlng, 12);\n\n    return this.setState({  \n      title: record.properties.title,\n      description: record.properties.description,\n      url: this.getAvatar(),\n      created: record.properties['created'],\n      contactPoint: record.properties['contactPoint'],\n      type: record.properties['type'],      \n    }); \n\n\n\n\n\n  }\n\n  getAvatar(){\n\n\n    const rnd=Math.random();\n    if (rnd < 0.2) {\n      return \"https://upload.wikimedia.org/wikipedia/en/a/a7/StanMarsh.png\";\n    } else if (rnd < 0.4) {\n      return \"https://upload.wikimedia.org/wikipedia/en/7/77/EricCartman.png\";\n    } else if (rnd < 0.6) {\n      return \"https://upload.wikimedia.org/wikipedia/en/2/25/KyleBroflovski.png\";\n    } else if (rnd < 0.8) {\n      return \"https://upload.wikimedia.org/wikipedia/en/6/6f/KennyMcCormick.png\";\n    } else {\n      return \"https://upload.wikimedia.org/wikipedia/en/a/ab/Wendy_South_Park.png\";\n    }\n  }\n\n  renderProjectItem() {\n\n    //console.log(this.props.records.features);\n    return this.state.records.map(record => {\n      return (\n        <div\n          className=\"project-item\"  key={record.id}\n          onClick={() => {\n            this.handleClick(record);\n          }}\n        >\n          <img src={this.getAvatar()} alt={record.properties.title} />\n          <h3>{record.properties.title}</h3>\n          <p>description: {record.properties.description}</p>\n          <p>contactPoint: {record.properties.contactPoint.name}</p>\n          <p>created: {record.properties['created']}</p>\n          <p>type: {record.properties['type']}</p>\n        </div>\n      );\n    });\n  }\n\n\n  render() {\n    return (\n\n      \n      <div> \n\n        <div className=\"card bg-dark text-white text-center\">\n          <div className=\"card-body\">\n            <h2 className=\"card-title\">{this.state.mainTitle !== \"\"? this.state.mainTitle : \"My Catalog\"}</h2>\n            <p className=\"card-text\">{this.state.mainDescription !== \"\"? this.state.mainDescription: \"This is a placeholder for the catalog description.\"}</p>\n          </div>\n        </div>\n\n        <div className=\"featured-section\">\n\n          <div id=\"feature-block\">\n            \n            <Map ref='map' center={this.state.center} zoom={7} whenCreated={map => this.setState({ map })} onClick={this.addMarker}>\n              <TileLayer\n                url=\"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png\"\n                attribution='&copy; Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n              />\n\n              <Rectangle bounds={this.state.mainExtent} pathOptions={limeOptions} />\n          </Map>     \n                 \n            <div id=\"right\">\n              <h2 id=\"feature-title\">{this.state.title}</h2>\n              <p id=\"feature-desc\">{this.state.description}</p>\n              <p id=\"feature-created\">{this.state.created}</p>\n            </div>\n\n          </div>\n\n\n          <div className=\"project-search\">\n          <div className=\"form-inline mb-3\">\n\n            <input type=\"text\" className=\"form-control flex-primary-1\" placeholder=\"\" aria-label=\"\" aria-describedby=\"basic-addon1\" name=\"title\" onChange={e => this.handleInputChange(e)}/>\n            <div className=\"input-group-prepend\">\n                <button className=\"btn btn-primary ml-2\" type=\"button\" onClick={(e) => this.handleSubmit(e)}>Filter</button>\n            </div>\n          </div>  \n        </div>\n\n          \n        </div>\n        \n\n\n\n\n\n\n        <div id=\"project-grid\">{this.renderProjectItem()}</div>\n\n        <footer className=\"page-footer font-small blue pt-4\">\n          <div className=\"footer-copyright text-center py-3\">Developed by ByteRoad:\n            <a href=\"/\"> ByteRoad.net</a>\n          </div>\n        </footer>\n\n\n\n      </div>\n    );\n  }\n}\n\nexport default UserView;\n","import React from \"react\";\nimport UserView from \"./components/userView\";\nimport \"./App.css\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { records: {}};\n  }\n\n\n\n  componentDidMount() {\n    fetch(\"https://emotional.byteroad.net/collections/ec_catalog/items?f=json\")\n      .then(res => res.json())\n      .then(newRecords => {\n        // upon success, update tasks\n        this.setState({ records: newRecords });\n        //console.log(newRecords);\n      })\n      .catch(error => {\n        // upon failure, show error message\n      });\n  }\n\n  render() {\n    return (\n      <div>\n         <UserView records={this.state.records.features} projects={this.state.projects}/>\n      </div>\n    );\n  }\n}\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}