{"version":3,"sources":["components/adminView.js","components/featureSection.js","components/userView.js","info.js","App.js","index.js"],"names":["require","AdminView","props","state","url","title","description","event","value","target","name","this","setState","e","preventDefault","addProject","console","log","id","onChange","handleInputChange","onClick","handleSubmit","React","Component","baseUrl","UserView","addMarker","markers","push","latlng","records","address","filter","fetch","then","res","json","newRecords","features","properties","ADDRESS","recordCreated","catch","error","getRecords","record","lat","Lat","lng","Long","refs","map","leafletElement","flyTo","className","key","handleClick","src","alt","Map","ref","center","zoom","TileLayer","attribution","position","idx","Marker","Popup","type","placeholder","aria-label","aria-describedby","renderProjectItem","App","adminView","projects","Info","newProject","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8387a30a.chunk.js","sourcesContent":["import React from \"react\";\nrequire(\"./adminView.css\");\n\nclass AdminView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      url: \"\",\n      title: \"\",\n      description: \"\"\n    };\n  }\n\n  handleInputChange(event) {\n    const value = event.target.value;\n    const name = event.target.name;\n\n    this.setState({\n      [name]: value\n    });\n  }\n\n  /* Step 2 of the code */\n  handleSubmit(e) {\n    e.preventDefault();\n    /* Step 2 */\n    this.props.addProject({\n      title: this.state.title,\n      url: this.state.url,\n      description: this.state.description\n    });\n    \n    console.log(\"form button clicked!\");\n  }\n\n  render() {\n    return (\n      <div>\n        <form id=\"myform\">\n          <label>\n            Project Title\n            <input name=\"title\" onChange={e => this.handleInputChange(e)} />\n          </label>\n          <label>\n            Project URL\n            <input name=\"url\" onChange={e => this.handleInputChange(e)} />\n          </label>\n          <label>\n            Project Description\n            <textarea\n              name=\"description\"\n              onChange={e => this.handleInputChange(e)}\n            />\n          </label>\n        </form>\n        <button onClick={(e) => this.handleSubmit(e)}>Submit</button>\n      </div>\n    );\n  }\n}\n\nexport default AdminView;\n","import React from \"react\";\nimport \"./featureSection.css\";\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\n\n/* step 3 */\nclass FeatureSection extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      url: this.props.url,\n      title: this.props.title,\n      description: this.props.description\n    };\n  }\n\n  render() {\n    return (\n      <div className=\"featured-section\">\n        <div id=\"feature-block\">\n\n        <Map ref='map' center={[41.38879, 2.15899]}\n              zoom={15}\n              >\n                <TileLayer\n                  url=\"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png\"\n                  attribution='&copy; Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n                />\n        </Map>\n\n\n          {/* <img id=\"feature-img\" src={this.props.url} alt={this.props.title} /> */}\n          <div id=\"right\">\n            <h2 id=\"feature-title\">{this.props.title}</h2>\n            <p id=\"feature-desc\">{this.props.description}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FeatureSection;\n","import React from \"react\";\nimport FeatureSection from \"./featureSection\";\nimport \"./userView.css\";\nimport \"./featureSection.css\";\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\n\nconst baseUrl='http://ec2-3-65-14-187.eu-central-1.compute.amazonaws.com:5000';\nconst collection=\"obs2\";\nconst limit=100;\n\nclass UserView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      records: [],\n      title: \"\",\n      address: \"\",\n      url: \"\",\n      filter:\"\",\n      markers: []\n    };\n  }\n\n\n  // Add a marker to the map, by clicking on it\n  addMarker = (e) => {\n    console.log(\"comes here\");\n    const {markers} = this.state\n    markers.push(e.latlng)\n    console.log(e.latlng);\n    this.setState({markers})\n  }  \n  \n  handleInputChange(event) {\n\n    this.setState({\n      filter: event.target.value\n    });\n  }\n\n  getRecords(url) {\n    fetch(url)\n      .then(res => res.json())\n      .then(newRecords => {\n        // upon success, update tasks\n        this.setState({ records: newRecords.features });\n        this.setState({title: this.state.records[0].properties.title});\n        this.setState({address: this.state.records[0].properties.ADDRESS});\n        this.setState({url: this.state.records[0].properties.url});\n        this.setState({recordCreated: this.state.records[0].properties['record-created']});\n        console.log(this.state.records);\n      })\n      .catch(error => {\n        // upon failure, show error message\n      });\n\n    \n  }\n\n  handleSubmit() {\n    \n      this.getRecords(this.state.filter != ''?\n        `${baseUrl}/collections/${collection}/items?q=${this.state.filter}`:\n        `${baseUrl}/collections/${collection}/items?limit=${limit}`);\n\n    \n  }\n\n\n  componentDidMount() {\n    this.getRecords(`${baseUrl}/collections/${collection}/items?limit=${limit}`);\n  }\n\n  /* step 3 */\n  handleClick(record) {\n\n    const latlng = {lat: record.properties.Lat, lng: record.properties.Long};\n    console.log(latlng);\n\n    const {markers} = this.state\n    markers.push(latlng)\n    this.setState({markers})\n    let mapInst =  this.refs.map.leafletElement;\n    mapInst.flyTo(latlng, 12);\n\n    return this.setState({  \n      title: record.properties.title,\n      address: record.properties.ADDRESS,\n      url: record.properties.url,\n      recordCreated: record.properties['record-created']\n    }); \n\n  }\n\n  renderProjectItem() {\n\n    //console.log(this.props.records.features);\n    return this.state.records.map(record => {\n      return (\n        <div\n          className=\"project-item\"  key={record.title}\n          onClick={() => {\n            this.handleClick(record);\n          }}\n        >\n          <img src={record.properties.url} alt={record.properties.title} />\n          <h3>{record.properties.title}</h3>\n          <p>{record.properties.ADDRESS}</p>\n          <p>record-created: {record.properties['record-created']}</p>\n        </div>\n      );\n    });\n  }\n\n\n  render() {\n    return (\n\n      <div> \n\n        <div className=\"featured-section\">\n\n\n\n          <div id=\"feature-block\">\n\n            {/* <img id=\"feature-img\" src={this.state.url} alt={this.state.title} /> */}\n            \n            <Map ref='map' center={[41.38879, 2.15899]} zoom={15} onClick={this.addMarker}>\n              <TileLayer\n                url=\"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png\"\n                attribution='&copy; Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n              />\n              {this.state.markers.map((position, idx) => \n              <Marker key={`marker-${idx}`} position={position}>\n                <Popup>\n                  <span>Hello world!</span>\n                </Popup>\n            </Marker>\n              )}\n          </Map>     \n            \n            \n            \n            \n            \n            <div id=\"right\">\n              <h2 id=\"feature-title\">{this.state.title}</h2>\n              <p id=\"feature-desc\">{this.state.address}</p>\n            </div>\n          </div>\n        </div>\n        \n\n\n        <div className=\"project-search\">\n\n          <div className=\"form-inline mb-3\">\n\n          <input type=\"text\" className=\"form-control flex-primary-1\" placeholder=\"\" aria-label=\"\" aria-describedby=\"basic-addon1\" name=\"title\" onChange={e => this.handleInputChange(e)}/>\n          <div className=\"input-group-prepend\">\n              <button className=\"btn btn-primary ml-2\" type=\"button\" onClick={(e) => this.handleSubmit(e)}>Filter</button>\n          </div>\n\n          </div>\n          \n        </div>\n\n\n\n        <div id=\"project-grid\">{this.renderProjectItem()}</div>\n      </div>\n    );\n  }\n}\n\nexport default UserView;\n","export default [\n  {\n    url:\n      \"http://upload.wikimedia.org/wikipedia/en/6/6b/Harry_Potter_and_the_Philosopher%27s_Stone_Book_Cover.jpg\",\n    title: \"Harry Potter and the Philosopher's Stone\",\n    description:\n      \"The first novel in the Harry Potter series and Rowling's debut novel, it follows Harry Potter, a young wizard who discovers his magical heritage on his eleventh birthday, when he receives a letter of acceptance to the Hogwarts School of Witchcraft and Wizardry. Harry makes close friends and a few enemies during his first year at the school, and with the help of his friends, Harry faces an attempted comeback by the dark wizard Lord Voldemort, who killed Harry's parents, but failed to kill Harry when he was just 15 months old.\"\n  },\n  {\n    url:\n      \"http://upload.wikimedia.org/wikipedia/en/5/5c/Harry_Potter_and_the_Chamber_of_Secrets.jpg\",\n    title: \"Harry Potter and the Chamber of Secrets\",\n    description:\n      \"The plot follows Harry's second year at Hogwarts School of Witchcraft and Wizardry, during which a series of messages on the walls of the school's corridors warn that the 'Chamber of Secrets' has been opened and that the heir of Slytherin would kill all pupils who do not come from all-magical families. These threats are found after attacks which leave residents of the school petrified. Throughout the year, Harry and his friends Ron and Hermione investigate the attacks.\"\n  },\n  {\n    url:\n      \"http://upload.wikimedia.org/wikipedia/en/a/a0/Harry_Potter_and_the_Prisoner_of_Azkaban.jpg\",\n    title: \"Harry Potter and the Prisoner of Azkaban\",\n    description:\n      \"The book follows Harry Potter, a young wizard, in his third year at Hogwarts School of Witchcraft and Wizardry. Along with friends Ronald Weasley and Hermione Granger, Harry investigates Sirius Black, an escaped prisoner from Azkaban who they believe is one of Lord Voldemort's old allies.\"\n  },\n  {\n    url:\n      \"http://upload.wikimedia.org/wikipedia/en/7/70/Harry_Potter_and_the_Order_of_the_Phoenix.jpg\",\n    title: \"Harry Potter and the Order of the Phoenix\",\n    description:\n      \"Harry Potter and the Order of the Phoenix is a fantasy novel written by British author J. K. Rowling and the fifth novel in the Harry Potter series. It follows Harry Potter's struggles through his fifth year at Hogwarts School of Witchcraft and Wizardry, including the surreptitious return of the antagonist Lord Voldemort, O.W.L. exams, and an obstructive Ministry of Magic. The novel was published on 21 June 2003 by Bloomsbury in the United Kingdom, Scholastic in the United States, and Raincoast in Canada. Five million copies were sold in the first 24 hours of publication.[1] It is the longest book of the series.\"\n  }\n];\n","import React from \"react\";\nimport AdminView from \"./components/adminView\";\nimport UserView from \"./components/userView\";\nimport Info from \"./info.js\";\nimport \"./App.css\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { adminView: false, records: {}, projects: Info };\n  }\n\n\n\n  componentDidMount() {\n    fetch(\"http://ec2-3-65-14-187.eu-central-1.compute.amazonaws.com:5000/collections/obs/items\")\n      .then(res => res.json())\n      .then(newRecords => {\n        // upon success, update tasks\n        this.setState({ records: newRecords });\n        console.log(newRecords);\n      })\n      .catch(error => {\n        // upon failure, show error message\n      });\n  }\n\n/*\n  addProject(newProject) {\n    this.setState({\n      projects: [...this.state.projects, newProject]\n    });\n  }\n\n  changeUser(isAdmin) {\n    this.setState({ adminView: isAdmin });\n  }\n*/\n  render() {\n    return (\n      <div>\n        {/* Step 1 */}\n{/*         <button onClick={() => this.changeUser(true)} className={this.state.adminView? 'button-clicked': 'button-normal'}>ADMIN</button>\n        <button onClick={() => this.changeUser(false)} className={!this.state.adminView? 'button-clicked': 'button-normal'}>USER</button>\n */}        \n{/* Step 1 */}\n        {this.state.adminView ? <AdminView addProject={newProject => this.addProject(newProject)} /> : \n         <UserView records={this.state.records.features} projects={this.state.projects}/> }\n\n      </div>\n    );\n  }\n}\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}